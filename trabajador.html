<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha de Colaborador | Red Rabbit Go</title>
    <meta name="description"
        content="Perfil de nuestro equipo de limpieza. Verificado, calificado y con reseñas reales.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: { 50: '#fef2f2', 100: '#fee2e2', 200: '#fecaca', 300: '#F2AEAE', 400: '#E84450', 500: '#D92534', 600: '#B51E2C', 700: '#991B1B', 800: '#7F1D1D', 900: '#611515' },
                        secondary: { 400: '#F2AEAE', 500: '#D92525', 600: '#B51E2C' }
                    },
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
                }
            }
        }
    </script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
    <style>
        .logo-brand-text {
            font-family: 'Inter', sans-serif;
            color: #D92534 !important;
            line-height: 0.85;
            font-weight: 900;
            display: flex;
            flex-direction: column;
            font-size: 1.1rem;
            letter-spacing: -0.02em;
        }

        .logo-brand-text span {
            display: block;
        }
    </style>
</head>

<body class="font-sans antialiased bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <a href="index.html" class="flex items-center gap-2">
                    <svg class="h-12 w-auto" width="80" height="42" viewBox="106.143 315.25 190.33 171.594"
                        fill="#D92534">
                        <path
                            d="M125.932,436.669c1.9-3.156,4.274-3.692,7.428-2.568c9.299,3.315,8.916,2.902,9.586-6.571 c0.465-6.571-0.065-10.493-6.309-14.381c-7.75-4.827-7.565-17.358-0.966-23.827c0.895-0.876,1.72-1.983,3.284-1.66 c1.321,0.875,0.882,2.286,1.015,3.505c0.518,4.752,2.511,8.581,6.699,11.145c1.812,1.108,3.14,1.232,4.515-0.801 c9.101-13.457,21.986-15.993,37.042-13.141c7.854,1.488,15.294,4.493,23.267,5.527c6.249,0.811,12.415,0.5,18.425-0.795 c7.441-1.604,12.399-6.385,14.837-13.784c0.86-2.611,0.168-3.784-2.343-3.83c-9.87-0.18-19.037-3.174-27.845-7.221 c-8.348-3.836-16.142-8.623-21.844-16.123c-1.846-2.427-3.443-5.13-1.933-8.184c1.456-2.944,4.477-3.087,7.392-3.132 c11.059-0.17,21.306,3.117,31.343,7.306c2.918,1.218,5.787,2.571,9.292,2.621c-4.222-3.309-8.546-6.496-12.638-9.958 c-4.658-3.943-8.716-8.412-10.36-14.543c-0.265-0.99-0.515-1.996-0.633-3.011c-0.688-5.938,2.29-8.726,8.189-7.827 c6.604,1.006,12.131,4.291,17.181,8.349c10.784,8.667,19.79,18.805,24.969,31.882c0.672,1.698,1.692,2.227,3.488,2.316 c7.493,0.37,13.589,3.304,17.825,9.804c2.384,3.658,4.854,7.312,8.15,10.263c2,1.79,1.593,3.951,0.999,6.084 c-1.945,6.99-6.661,11.015-13.589,12.85c-2.81,0.744-6.477-0.094-8.271,2.421c-1.627,2.281-0.179,5.515-0.396,8.322 c-0.499,6.467-1.9,12.729-4.403,18.701c-1.288,3.074-0.958,5.132,2.12,7.068c4.129,2.597,7.942,5.713,11.798,8.727 c4.153,3.247,6.417,7.687,7.302,12.796c0.592,3.417-0.144,6.754-3.479,8.267c-3.525,1.599-5.947-0.828-7.523-3.68 c-4.474-8.096-12.097-10.829-20.393-13.194c-5.423-1.546-10.292-0.707-15.397,0.476c-7.916,1.834-15.631,0.475-23.167-1.923 c-5.153-1.639-10.068-3.976-14.814-6.584c-4.017-2.208-8.418-3.151-12.781-4.229c-3.264-0.806-5.34,0.232-7.092,3.486 c-6.197,11.509-15.385,19.166-28.862,20.67c-5.707,0.637-10.963-0.89-16.041-3.299c-4.241-2.012-4.441-1.934-5.528,2.727 c-1.14,4.885-1.723,9.936-3.791,14.549c-2.736,6.105-6.258,11.547-13.128,13.806c-2.923,0.961-5.852,1.04-8.729,0.168 c-4.079-1.235-4.881-5.063-1.819-8.094c0.274-0.271,0.556-0.552,0.883-0.748c11.14-6.681,13.477-17.906,15.037-29.44 C124.421,444.253,124.847,440.558,125.932,436.669z">
                        </path>
                        <path
                            d="M295.821,434.338c1.126,3.639,2.505,7.351-0.994,9.816c-3.678,2.594-6.409-0.458-9.079-2.639 c-3.277-2.677-6.588-5.313-9.828-8.034c-2.834-2.381-3.407-5.829-1.648-8.957c0.638-1.135,1.585-1.784,2.835-1.518 C284.543,424.586,292.121,425.97,295.821,434.338z">
                        </path>
                    </svg>
                    <div class="logo-brand-text">
                        <span>Red</span>
                        <span>Rabbit</span>
                        <span>Go</span>
                    </div>
                </a>
                <a href="index.html"
                    class="flex items-center gap-2 text-gray-600 hover:text-primary-600 font-medium transition-colors">
                    <i data-lucide="arrow-left" class="w-5 h-5"></i>
                    Volver al Inicio
                </a>
            </div>
        </div>
    </nav>

    <!-- Loading State -->
    <div id="loadingState" class="max-w-5xl mx-auto px-4 py-16">
        <div class="animate-pulse space-y-8">
            <div class="flex flex-col md:flex-row gap-8">
                <div class="w-48 h-48 bg-gray-200 rounded-2xl"></div>
                <div class="flex-1 space-y-4">
                    <div class="h-8 bg-gray-200 rounded-lg w-1/3"></div>
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                    <div class="h-4 bg-gray-200 rounded w-full"></div>
                    <div class="h-4 bg-gray-200 rounded w-2/3"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Worker Profile Content -->
    <main id="workerProfile" class="hidden">
        <!-- Hero Header -->
        <section class="bg-gradient-to-br from-gray-900 via-gray-800 to-primary-900 pt-12 pb-20">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col md:flex-row gap-8 items-start">
                    <!-- Photo -->
                    <div class="relative">
                        <img id="workerPhoto" src="" alt=""
                            class="w-40 h-40 md:w-48 md:h-48 rounded-2xl object-cover shadow-2xl border-4 border-white/20">
                        <div id="verifiedBadge"
                            class="hidden absolute -bottom-3 -right-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white px-3 py-1.5 rounded-full text-sm font-semibold flex items-center gap-1 shadow-lg">
                            <i data-lucide="shield-check" class="w-4 h-4"></i>
                            Verificado
                        </div>
                    </div>
                    <!-- Info -->
                    <div class="flex-1">
                        <h1 id="workerName" class="text-3xl md:text-4xl font-extrabold text-white mb-2"></h1>
                        <p id="workerPuesto" class="text-primary-300 text-lg font-medium mb-1"></p>
                        <p id="workerEspecialidad" class="text-gray-400 mb-4"></p>

                        <!-- Rating -->
                        <div class="flex items-center gap-3 mb-6">
                            <div id="workerStars" class="flex items-center gap-1"></div>
                            <span id="workerRating" class="text-2xl font-bold text-white"></span>
                            <span id="workerReviewCount" class="text-gray-400"></span>
                        </div>

                        <!-- Quick Stats -->
                        <div class="flex flex-wrap gap-4">
                            <div class="bg-white/10 backdrop-blur-sm rounded-xl px-4 py-3 flex items-center gap-2">
                                <i data-lucide="clock" class="w-5 h-5 text-primary-300"></i>
                                <div>
                                    <p class="text-xs text-gray-400">Experiencia</p>
                                    <p id="workerExperiencia" class="text-white font-semibold"></p>
                                </div>
                            </div>
                            <div class="bg-white/10 backdrop-blur-sm rounded-xl px-4 py-3 flex items-center gap-2">
                                <i data-lucide="calendar" class="w-5 h-5 text-primary-300"></i>
                                <div>
                                    <p class="text-xs text-gray-400">En Red Rabbit Go desde</p>
                                    <p id="workerFechaIngreso" class="text-white font-semibold"></p>
                                </div>
                            </div>
                            <div class="bg-white/10 backdrop-blur-sm rounded-xl px-4 py-3 flex items-center gap-2">
                                <i data-lucide="briefcase" class="w-5 h-5 text-primary-300"></i>
                                <div>
                                    <p class="text-xs text-gray-400">Disponibilidad</p>
                                    <p id="workerDisponibilidad" class="text-white font-semibold"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Content Area -->
        <section class="-mt-8 pb-20">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- Left Column -->
                    <div class="lg:col-span-2 space-y-8">
                        <!-- Bio -->
                        <div class="bg-white rounded-2xl shadow-lg p-8">
                            <h2 class="text-2xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                                <i data-lucide="user" class="w-6 h-6 text-primary-500"></i>
                                Sobre mí
                            </h2>
                            <p id="workerBio" class="text-gray-600 leading-relaxed text-lg"></p>
                        </div>

                        <!-- Reviews -->
                        <div class="bg-white rounded-2xl shadow-lg p-8">
                            <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2">
                                <i data-lucide="message-square" class="w-6 h-6 text-primary-500"></i>
                                Reseñas de Clientes
                            </h2>
                            <div id="workerReviews" class="space-y-6"></div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="space-y-6">
                        <!-- Skills -->
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
                                <i data-lucide="award" class="w-5 h-5 text-primary-500"></i>
                                Habilidades
                            </h3>
                            <div id="workerSkills" class="flex flex-wrap gap-2"></div>
                        </div>

                        <!-- Verified Documents -->
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
                                <i data-lucide="file-check" class="w-5 h-5 text-emerald-500"></i>
                                Documentación Verificada
                            </h3>
                            <div id="workerDocuments" class="space-y-3"></div>
                        </div>

                        <!-- Contact CTA -->
                        <div
                            class="bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl shadow-lg p-6 text-white text-center">
                            <svg class="w-10 h-10 mx-auto mb-3 opacity-90" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z" />
                            </svg>
                            <h3 class="text-lg font-bold mb-2">¿Querés a este colaborador?</h3>
                            <p class="text-white/80 text-sm mb-4">Escribinos por WhatsApp y solicitá que este
                                colaborador
                                vaya a tu hogar.</p>
                            <a href="https://wa.me/5492216924104?text=Hola!%20Quiero%20solicitar%20este%20colaborador"
                                target="_blank"
                                class="inline-block bg-white text-primary-600 font-bold py-3 px-6 rounded-xl hover:bg-gray-100 transition-colors">
                                Pedilo por WhatsApp
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Not Found State -->
    <div id="notFoundState" class="hidden max-w-lg mx-auto px-4 py-24 text-center">
        <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-gray-100 flex items-center justify-center">
            <i data-lucide="user-x" class="w-12 h-12 text-gray-400"></i>
        </div>
        <h2 class="text-2xl font-bold text-gray-900 mb-2">Trabajador no encontrado</h2>
        <p class="text-gray-500 mb-6">No pudimos encontrar el perfil que buscas.</p>
        <a href="index.html"
            class="btn-primary px-6 py-3 rounded-xl text-white font-semibold inline-flex items-center gap-2">
            <i data-lucide="arrow-left" class="w-5 h-5"></i>
            Volver al Inicio
        </a>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-gray-500 text-sm">&copy; 2025 Red Rabbit Go. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        let appData = null;

        document.addEventListener('DOMContentLoaded', async () => {
            await loadData();
            renderWorkerProfile();
            lucide.createIcons();
        });

        async function loadData() {
            try {
                // Cache buster to ensure visitors always get the latest version after edits
                const response = await fetch('data.json?t=' + new Date().getTime());
                appData = await response.json();
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        function renderWorkerProfile() {
            const params = new URLSearchParams(window.location.search);
            const workerId = parseInt(params.get('id'));

            if (!appData || !workerId) {
                showNotFound();
                return;
            }

            const worker = appData.staff.find(s => s.id === workerId);
            if (!worker) {
                showNotFound();
                return;
            }

            // Update page title
            document.title = `${worker.nombre} - ${worker.puesto} | Red Rabbit Go`;

            // Fill basic info
            document.getElementById('workerPhoto').src = worker.foto;
            document.getElementById('workerPhoto').alt = worker.nombre;
            document.getElementById('workerName').textContent = worker.nombre;
            document.getElementById('workerPuesto').textContent = worker.puesto;
            document.getElementById('workerEspecialidad').textContent = worker.especialidad;
            document.getElementById('workerExperiencia').textContent = worker.experiencia;
            document.getElementById('workerBio').textContent = worker.bio || 'Colaborador verificado de Red Rabbit Go.';
            document.getElementById('workerDisponibilidad').textContent = worker.disponibilidad || 'Consultar';

            // Verified badge
            if (worker.verificado) {
                document.getElementById('verifiedBadge').classList.remove('hidden');
            }

            // Fecha ingreso
            if (worker.fechaIngreso) {
                const date = new Date(worker.fechaIngreso);
                document.getElementById('workerFechaIngreso').textContent = date.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' });
            }

            // Rating
            const rating = worker.rating || 0;
            document.getElementById('workerRating').textContent = rating.toFixed(1);
            const starsContainer = document.getElementById('workerStars');
            for (let i = 0; i < 5; i++) {
                const star = document.createElement('i');
                star.setAttribute('data-lucide', 'star');
                star.className = `w-5 h-5 ${i < Math.round(rating) ? 'text-amber-400 fill-amber-400' : 'text-gray-600'}`;
                starsContainer.appendChild(star);
            }
            const reviews = worker.resenas || [];
            document.getElementById('workerReviewCount').textContent = `(${reviews.length} reseñas)`;

            // Skills
            const skillsContainer = document.getElementById('workerSkills');
            (worker.habilidades || []).forEach(skill => {
                const tag = document.createElement('span');
                tag.className = 'px-3 py-1.5 bg-primary-50 text-primary-700 rounded-full text-sm font-medium';
                tag.textContent = skill;
                skillsContainer.appendChild(tag);
            });

            // Documents
            const docsContainer = document.getElementById('workerDocuments');
            (worker.documentosVerificados || []).forEach(doc => {
                const item = document.createElement('div');
                item.className = 'flex items-center gap-3 p-3 bg-emerald-50 rounded-xl';
                item.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center">
                        <i data-lucide="check" class="w-4 h-4 text-white"></i>
                    </div>
                    <span class="text-gray-700 font-medium">${doc}</span>
                `;
                docsContainer.appendChild(item);
            });

            // Reviews
            const reviewsContainer = document.getElementById('workerReviews');
            if (reviews.length === 0) {
                reviewsContainer.innerHTML = '<p class="text-gray-400 italic">Aún no hay reseñas para este colaborador.</p>';
            } else {
                reviews.forEach(review => {
                    const stars = Array(5).fill().map((_, i) =>
                        `<i data-lucide="star" class="w-4 h-4 ${i < review.rating ? 'text-amber-400 fill-amber-400' : 'text-gray-300'}"></i>`
                    ).join('');

                    const date = new Date(review.fecha).toLocaleDateString('es-ES', { day: 'numeric', month: 'long', year: 'numeric' });

                    const el = document.createElement('div');
                    el.className = 'border-b border-gray-100 pb-6 last:border-0 last:pb-0';
                    el.innerHTML = `
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-primary-400 to-secondary-500 flex items-center justify-center text-white font-bold">
                                    ${review.autor.charAt(0)}
                                </div>
                                <div>
                                    <p class="font-semibold text-gray-900">${review.autor}</p>
                                    <p class="text-sm text-gray-500">${review.empresa}</p>
                                </div>
                            </div>
                            <p class="text-sm text-gray-400">${date}</p>
                        </div>
                        <div class="flex items-center gap-1 mb-2">${stars}</div>
                        <p class="text-gray-600 italic">"${review.texto}"</p>
                    `;
                    reviewsContainer.appendChild(el);
                });
            }

            // Show profile, hide loading
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('workerProfile').classList.remove('hidden');
            lucide.createIcons();
        }

        function showNotFound() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('notFoundState').classList.remove('hidden');
            lucide.createIcons();
        }
    </script>
</body>

</html>